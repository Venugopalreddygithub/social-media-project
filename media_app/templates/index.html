{% extends "base.html" %}

{% block content %}
 {% if request.user.is_authenticated %}
 <form method="POST" enctype="multipart/form-data" action="{% url 'submit_post' %}" >
    {% csrf_token %}
    <div class="mb-3">
        <div class="form-floating">
            <textarea class="form-control" placeholder="Post some content here" name="post_caption" id="post_caption" style="height: 100px"></textarea>
            <label for="post_caption">Your Content</label>
          </div>
          <div class="input-group">
            <input type="file" class="form-control" id="post_image" name="post_image"  aria-label="Upload" accept=".jpeg, .jpg, .png" >
          </div>
    </div>
    <div style="display:flex;flex-direction:row;justify-content: center;">
        <button type="submit" class="btn btn-dark">Post My Caption</button>
    </div>
  </form>
 {% else %}
 <div class="alert alert-warning" role="alert">
    Please Log in or sign up to post content
  </div>
  {% endif %}

 {% for post in posts %}
  <div class="card" style="width: 18rem;">
    {% if post.image and post.image.url %}
    <img src="{{post.image.url}}" class="card-img-top" alt="...">
    {% endif %}
    <img src="" class="card-img-top" alt="...">
    <div class="card-body">
      <p class="card-text">{{post.caption}}</p>
    </div>
  </div>
  {% endfor %}

{% endblock %}